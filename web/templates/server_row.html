<td class="px-4 py-2">
    <div>
        <span class="font-medium text-gray-800">{{.server.Name}}</span>
        {{if .server.Env}}
        <div class="text-xs text-gray-500 mt-1">
            {{range $key, $value := .server.Env}}
            <span class="bg-gray-200 rounded px-1">{{$key}}</span>
            {{end}}
        </div>
        {{end}}
    </div>
</td>
<td class="px-4 py-2">
    <div class="text-sm text-gray-600">
        <code>{{.server.Command}} {{range .server.Args}}{{.}} {{end}}</code>
    </div>
</td>
<td class="px-4 py-2 text-center">
    <label class="inline-flex items-center">
        <input type="checkbox"
               class="form-checkbox h-5 w-5 text-blue-600"
               {{if .server.EnabledGlobally}}checked{{end}}
               hx-post="/htmx/servers/{{.server.Name}}/toggle"
               hx-vals='{"enabled": "{{if .server.EnabledGlobally}}false{{else}}true{{end}}"}'
               hx-target="#server-{{.server.Name}}"
               hx-swap="outerHTML"
               hx-trigger="click"
               _="on htmx:afterRequest trigger configChanged on body">
    </label>
</td>
{{range .clients}}
<td class="px-4 py-2 text-center" id="client-{{.Name}}-server-{{$.server.Name}}">
    {{template "client_toggle.html" dict "server" $.server "client" .Name}}
</td>
{{end}}